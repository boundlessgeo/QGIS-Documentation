<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Writing new Processing algorithms as python scripts</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-2.3.2/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/qgis-style.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-2.3.2/css/bootstrap-responsive.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     'testing',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/qgis-site.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
    <link rel="shortcut icon" href="../../../_static/images/favicon.ico?1322140996"/>
    <link rel="top" title="" href="../../../index.html" />
    <link rel="up" title="QGIS processing framework" href="index.html" />
    <link rel="next" title="Configuring external applications" href="3rdParty.html" />
    <link rel="prev" title="The history manager" href="history.html" />
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
    <meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>



    
  <div id="navbar" class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="../../index.html">QGIS Documentation Project</a>
        <span class="navbar-text pull-left"><b>testing</b></span>
        
          <select id="languages">
  <!-- note on the options here: the 'title' string is to be translated in your
  language, but the element text is supposed to stay in native lang/txt -->
  <option value="en" title="English">English</option>
<!--  <option value="ca_ES" title="Catalan">Catalan</option>
  <option value="da_DK" title="Danish">Dansk</option>
  <option value="de" title="German">Deutsch</option>
  <option value="es" title="Spanish">Español</option>
  <option value="fa" title="Persian">فارسی</option>
  <option value="fi" title="Finnish">Suomalainen</option>
  <option value="fr" title="French">Français</option>
  <option value="id" title="Indonesian">Bahasa Indonesia</option>
  <option value="it" title="Italian">Italiano</option>
  <option value="ja" title="Japanese">日本語</option>
  <option value="ko_KR" title="Korean">한국어</option>
  <option value="nl" title="Dutch">Nederlands</option>
  <option value="pt_PT" title="Portuguese">Português</option>
  <option value="ro" title="Romanian">Română</option>
  <option value="ru" title="Russian">Русский</option>
  <option value="zh_CN" title="Chinese (China)">中文</option>
  <option value="zh_TW" title="Chinese (Taiwan)">Chinese (Taiwan)</option> -->
</select>

<script>
    var currentPage = 'docs/user_manual/processing/scripts.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    // split index.html if currentUrl is ended by '/'
    var currentUrl = window.location.href;
    if (currentUrl.slice(-1) == '/' && currentPage.slice(-1) != '/'){
      var pages = currentPage.split('/');
      pages.pop();
      currentPage = pages.join('/') + '/';
    }
    $(document).ready(function(){
        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is the index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave
        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('This is an documentation error, please report back to QGIS devs.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        // TODO: links should come from conf.py
        // TODO: all template pages have the actual translation in sphinc.conf
        // documentation master only github links
        /*
        fix_translation_link = 'https://www.transifex.com/projects/p/qgis-website/translate/#' + 
            currentLang.slice(1) + currentPage.replace(/\//g, "_").replace(/-/g, "_").replace(/\.html/g, "")
        if ('/en/' != currentLang) {
            $('#fix_translation_link').attr('href', fix_translation_link);
        }
        */
        fix_text_link = 'https://github.com/qgis/QGIS-Documentation/edit/master/source/' +
            currentPage.replace(/.html/g, ".rst")
        // TODO: only on rst pages, here a list of pages which are actual templates?
        if (true){
            $('#fix_text_link').attr('href', fix_text_link);
        }

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>
        
        <div class="nav-collapse collapse">
          <ul class="unstyled nav main-menu">
            <!--<li><a href="../../../site/about/index.html">Discover QGIS</a></li>
            <li><a href="../../../site/forusers/index.html">For Users</a></li>
            <li><a href="../../../site/getinvolved/index.html">Get Involved</a></li>
            <li><a href="../../index.html">Documentation</a></li>-->
            <li><a href="../../index.html">Documentation QGIS testing</a></li>
            <li>
          
<form class="navbar-search" action="../../../search.html" method="get">
  <input type="text" name="q" class="search-query" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

    
    <div class="related">
       
      
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="3rdParty.html" title="Configuring external applications"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="history.html" title="The history manager"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html"></a> &raquo;</li>
          <li><a href="../index.html" >QGIS User Guide</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">QGIS processing framework</a> &raquo;</li> 
      </ul>
    </div>
    <div style="display:none;" class="container" id="nextprev" >
    
    <a accesskey="p" href="history.html">&lt;&lt; prev</a>
    
    
    <a accesskey="n" href="3rdParty.html">next &gt;&gt;</a>
    
    </div>




    
        <div class="container">
            <div class="row">
      <div class="span4">
        <div id="sidebar" class="bs-sidenav well" data-spy="scroll">
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User guide/Manual (QGIS Testing!)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../preamble/preamble.html">Preamble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/conventions.html">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/foreword.html">Foreword</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/features.html">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/whats_new.html">What&#8217;s new in QGIS testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_gui.html">QGIS GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/general_tools.html">General Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_configuration.html">QGIS Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_projections/working_with_projections.html">Working with Projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qgis_browser/qgis_browser.html">QGIS Browser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector/index.html">Working with Vector Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_raster/index.html">Working with Raster Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_ogc/index.html">Working with OGC Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_gps/index.html">Working with GPS Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth_system/index.html">Authentication System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grass_integration/grass_integration.html">GRASS GIS Integration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">QGIS processing framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../print_composer/index.html">Print Composer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/plugins_index.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/help_and_support.html">Help and Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/appendices.html">Appendix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../literature_web/literature_and_web_references.html">Literature and Web References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="http://docs.qgis.org/testing/pdf/">User guide/Manual PDF&#8217;s</a></li>
</ul>

        </div>
      </div>
                <div class="span8">
                    
                        
                            <div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#writing-new-processing-algorithms-as-python-scripts" id="id1">Writing new Processing algorithms as python scripts</a></li>
<li><a class="reference internal" href="#handing-data-produced-by-the-algorithm" id="id2">Handing data produced by the algorithm</a></li>
<li><a class="reference internal" href="#communicating-with-the-user" id="id3">Communicating with the user</a></li>
<li><a class="reference internal" href="#documenting-your-scripts" id="id4">Documenting your scripts</a></li>
<li><a class="reference internal" href="#example-scripts" id="id5">Example scripts</a></li>
<li><a class="reference internal" href="#best-practices-for-writing-script-algorithms" id="id6">Best practices for writing script algorithms</a></li>
<li><a class="reference internal" href="#pre-and-post-execution-script-hooks" id="id7">Pre- and post-execution script hooks</a></li>
</ul>
</div>
<div class="section" id="writing-new-processing-algorithms-as-python-scripts">
<h1><a class="toc-backref" href="#id1">Writing new Processing algorithms as python scripts</a><a class="headerlink" href="#writing-new-processing-algorithms-as-python-scripts" title="Permalink to this headline">¶</a></h1>
<p>You can create your own algorithms by writing the corresponding Python code and
adding a few extra lines to supply additional information needed to define the
semantics of the algorithm.
You can find a <em class="guilabel">Create new script</em> menu under the <em class="guilabel">Tools</em>
group in the <em class="guilabel">Script</em> algorithms block of the toolbox. Double-click on
it to open the script edition dialog. That&#8217;s where you should type your code.
Saving the script from there in the <tt class="file docutils literal"><span class="pre">scripts</span></tt> folder (the default one when
you open the save file dialog), with <tt class="file docutils literal"><span class="pre">.py</span></tt> extension, will automatically
create the corresponding algorithm.</p>
<p>The name of the algorithm (the one you will see in the toolbox) is created from
the filename, removing its extension and replacing underscores with blank spaces.</p>
<p>Let&#8217;s have the following code, which calculates the Topographic Wetness Index
(TWI) directly from a DEM</p>
<div class="highlight-python"><pre>##dem=raster
##twi=output raster
ret_slope = processing.runalg("saga:slopeaspectcurvature", dem, 0, None,
                None, None, None, None)
ret_area = processing.runalg("saga:catchmentarea", dem,
                0, False, False, False, False, None, None, None, None, None)
processing.runalg("saga:topographicwetnessindextwi, ret_slope['SLOPE'],
                ret_area['AREA'], None, 1, 0, twi)</pre>
</div>
<p>As you can see, it involves 3 algorithms, all of them coming from SAGA. The last
one of them calculates the TWI, but it needs a slope layer and a flow accumulation
layer. We do not have these, but since we have the DEM, we can calculate them by
calling the corresponding SAGA algorithms.</p>
<p>The part of the code where this processing takes place is not difficult to
understand if you have read the previous chapter. The first
lines, however, need some additional explanation. They provide the
information that is needed to turn your code into an algorithm that can be run from any
of the GUI components, like the toolbox or the graphical modeler.</p>
<p>These lines start with a double Python comment symbol (<tt class="docutils literal"><span class="pre">##</span></tt>) and have the
following structure</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">parameter_name</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">parameter_type</span><span class="p">]</span> <span class="p">[</span><span class="n">optional_values</span><span class="p">]</span>
</pre></div>
</div>
<p>Here is a list of all the parameter types that are supported in processing scripts,
their syntax and some examples.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">raster</span></tt>. A raster layer</li>
<li><tt class="docutils literal"><span class="pre">vector</span></tt>. A vector layer</li>
<li><tt class="docutils literal"><span class="pre">table</span></tt>. A table</li>
<li><tt class="docutils literal"><span class="pre">number</span></tt>. A numerical value. A default value must be provided. For instance,
<tt class="docutils literal"><span class="pre">depth=number</span> <span class="pre">2.4</span></tt></li>
<li><tt class="docutils literal"><span class="pre">string</span></tt>. A text string. As in the case of numerical values, a default value
must be added. For instance, <tt class="docutils literal"><span class="pre">name=string</span> <span class="pre">Victor</span></tt></li>
<li><tt class="docutils literal"><span class="pre">longstring</span></tt>. Same as string, but a larger text box will be shown, so it is
better suited for long strings, such as for a script expecting a small code snippet.</li>
<li><tt class="docutils literal"><span class="pre">boolean</span></tt>. A boolean value. Add <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt> after it to set the
default value. For example, <tt class="docutils literal"><span class="pre">verbose=boolean</span> <span class="pre">True</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">multiple</span> <span class="pre">raster</span></tt>. A set of input raster layers.</li>
<li><tt class="docutils literal"><span class="pre">multiple</span> <span class="pre">vector</span></tt>. A set of input vector layers.</li>
<li><tt class="docutils literal"><span class="pre">field</span></tt>. A field in the attributes table of a vector layer. The name of the
layer has to be added after the <tt class="docutils literal"><span class="pre">field</span></tt> tag. For instance, if you have
declared a vector input with <tt class="docutils literal"><span class="pre">mylayer=vector</span></tt>, you could use <tt class="docutils literal"><span class="pre">myfield=field</span>
<span class="pre">mylayer</span></tt> to add a field from that layer as parameter.</li>
<li><tt class="docutils literal"><span class="pre">extent</span></tt>. A spatial extent defined by xmin, xmax, ymin, ymax</li>
<li><tt class="docutils literal"><span class="pre">folder</span></tt>. A folder</li>
<li><tt class="docutils literal"><span class="pre">file</span></tt>. A filename</li>
<li><tt class="docutils literal"><span class="pre">crs</span></tt>. A Coordinate Reference System</li>
<li><tt class="docutils literal"><span class="pre">selection</span></tt>. A dropdown menu that allows the user to select from
a pre-populated list. For example <tt class="docutils literal"><span class="pre">units=selection</span> <span class="pre">sq_km;sq_miles;sq_degrees</span></tt></li>
<li><tt class="docutils literal"><span class="pre">name</span></tt>. Name of the script. This will be displayed as the algorithm name in the
processing toolbox. For example <tt class="docutils literal"><span class="pre">My</span> <span class="pre">Algorithm</span> <span class="pre">Name=name</span></tt></li>
<li><tt class="docutils literal"><span class="pre">group</span></tt>. Folder name where the script will appear in the Processing Toolbox.
For Example, adding <tt class="docutils literal"><span class="pre">Utils=groups</span></tt> will put the script within a <tt class="docutils literal"><span class="pre">Utils</span></tt> folder
within Scripts.</li>
</ul>
<p>The parameter name is the name that will be shown to the user when executing the
algorithm, and also the variable name to use in the script code. The value entered
by the user for that parameter will be assigned to a variable with that name.</p>
<p>When showing the name of the parameter to the user, the name will be edited to
improve its appearance, replacing underscores with spaces. So, for instance,
if you want the user to see a parameter named <tt class="docutils literal"><span class="pre">A</span> <span class="pre">numerical</span> <span class="pre">value</span></tt>, you can use
the variable name <tt class="docutils literal"><span class="pre">A_numerical_value</span></tt>.</p>
<p>Layers and tables values are strings containing the filepath of the corresponding
object. To turn them into a QGIS object, you can use the <tt class="docutils literal"><span class="pre">processing.getObjectFromUri()</span></tt>
function. Multiple inputs also have a string value, which contains the filepaths
to all selected objects, separated by semicolons (<tt class="docutils literal"><span class="pre">;</span></tt>).</p>
<p>Outputs are defined in a similar manner, using the following tags:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">output</span> <span class="pre">raster</span></tt></li>
<li><tt class="docutils literal"><span class="pre">output</span> <span class="pre">vector</span></tt></li>
<li><tt class="docutils literal"><span class="pre">output</span> <span class="pre">table</span></tt></li>
<li><tt class="docutils literal"><span class="pre">output</span> <span class="pre">html</span></tt></li>
<li><tt class="docutils literal"><span class="pre">output</span> <span class="pre">file</span></tt></li>
<li><tt class="docutils literal"><span class="pre">output</span> <span class="pre">number</span></tt></li>
<li><tt class="docutils literal"><span class="pre">output</span> <span class="pre">string</span></tt></li>
<li><tt class="docutils literal"><span class="pre">output</span> <span class="pre">extent</span></tt></li>
</ul>
<p>The value assigned to the output variables is always a string with a filepath.
It will correspond to a temporary filepath in case the user has not entered any
output filename.</p>
<p>In addition to the tags for parameters and outputs, you can also define the group
under which the algorithm will be shown, using the <tt class="docutils literal"><span class="pre">group</span></tt> tag.</p>
<p>The last tag that you can use in your script header is <tt class="docutils literal"><span class="pre">##nomodeler</span></tt>.
Use that when you do not want your algorithm to be shown in the modeler window.
This should be used for algorithms that do not have a clear syntax (for instance,
if the number of layers to be created is not known in advance, at design time),
which make them unsuitable for the graphical modeler</p>
</div>
<div class="section" id="handing-data-produced-by-the-algorithm">
<h1><a class="toc-backref" href="#id2">Handing data produced by the algorithm</a><a class="headerlink" href="#handing-data-produced-by-the-algorithm" title="Permalink to this headline">¶</a></h1>
<p>When you declare an output representing a layer (raster, vector or table),
the algorithm will try to add it to QGIS once it
is finished. That is the reason why, although the <tt class="docutils literal"><span class="pre">runalg()</span></tt> method does not
load the layers it produces, the final <em>TWI</em> layer will be loaded, since it is saved
to the file entered by the user, which is the value of the corresponding output.</p>
<p>Do not use the <tt class="docutils literal"><span class="pre">load()</span></tt> method in your script algorithms, but just when working
with the console line. If a layer is created as output of an algorithm, it should
be declared as such. Otherwise, you will not be able to properly use the algorithm
in the modeler, since its syntax (as defined by the tags explained above) will
not match what the algorithm really creates.</p>
<p>Hidden outputs (numbers and strings) do not have a value. Instead, it is you who
has to assign a value to them. To do so, just set the value of a variable with
the name you used to declare that output. For instance, if you have used this
declaration,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">##average=output number</span>
</pre></div>
</div>
<p>the following line will set the value of the output to 5:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">average</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
<div class="section" id="communicating-with-the-user">
<h1><a class="toc-backref" href="#id3">Communicating with the user</a><a class="headerlink" href="#communicating-with-the-user" title="Permalink to this headline">¶</a></h1>
<p>If your algorithm takes a long time to process, it is a good idea to inform the
user. You have a global named <tt class="docutils literal"><span class="pre">progress</span></tt> available, with two available methods:
<tt class="docutils literal"><span class="pre">setText(text)</span></tt> and <tt class="docutils literal"><span class="pre">setPercentage(percent)</span></tt> to modify the progress text and
the progress bar.</p>
<p>If you have to provide some information to the user, not related to the progress of
the algorithm, you can use the
<tt class="docutils literal"><span class="pre">setInfo(text)</span></tt> method, also from the <tt class="docutils literal"><span class="pre">progress</span></tt> object.</p>
<p>If your script has some problem, the correct way of propagating it is to raise
an exception of type <tt class="docutils literal"><span class="pre">GeoAlgorithmExecutionException()</span></tt>. You can pass a message
as argument to the constructor of the exception. Processing will take care of
handling it and communicating with the user, depending on where the algorithm
is being executed from (toolbox, modeler, Python console...)</p>
</div>
<div class="section" id="documenting-your-scripts">
<h1><a class="toc-backref" href="#id4">Documenting your scripts</a><a class="headerlink" href="#documenting-your-scripts" title="Permalink to this headline">¶</a></h1>
<p>As in the case of models, you can create additional documentation for your script,
to explain what they do and how to use them. In the script editing dialog you will
find a <strong>[Edit script help]</strong> button. Click on it and it will take you to the help
editing dialog. Check the chapter about the graphical modeler to find out more about
this dialog and how to use it.</p>
<p>Help files are saved in the same folder as the script itself, adding the
<tt class="file docutils literal"><span class="pre">.help</span></tt> extension to the filename. Note that you can edit your script&#8217;s
help before saving it for the first time. If you later close the script editing
dialog without saving the script (i.e. you discard it), the help content you
wrote will be lost. If your script was already saved and is associated with a
filename, saving is done automatically.</p>
</div>
<div class="section" id="example-scripts">
<h1><a class="toc-backref" href="#id5">Example scripts</a><a class="headerlink" href="#example-scripts" title="Permalink to this headline">¶</a></h1>
<p>Several examples are available in the on-line collection of scripts, which you can access by
selecting the <em>Get script from on-line script collection</em> tool under the <em>Scripts/tools</em> entry in the toolbox.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../../_images/script_online.png"><img alt="../../../_images/script_online.png" src="../../../_images/script_online.png" style="width: 25em;" /></a>
</div>
<p>Please, check them to see real examples of how to create algorithms using the processing framework classes. You can
right-click on any script algorithm and select <em class="guilabel">Edit script</em> to edit
its code or just to see it.</p>
</div>
<div class="section" id="best-practices-for-writing-script-algorithms">
<h1><a class="toc-backref" href="#id6">Best practices for writing script algorithms</a><a class="headerlink" href="#best-practices-for-writing-script-algorithms" title="Permalink to this headline">¶</a></h1>
<p>Here&#8217;s a quick summary of ideas to consider when creating your script algorithms
and, especially, if you want to share with other QGIS users. Following these
simple rules will ensure consistency across the different Processing elements
such as the toolbox, the modeler or the batch processing interface.</p>
<ul class="simple">
<li>Do not load resulting layers. Let Processing handle your results and load your layers if needed.</li>
<li>Always declare the outputs your algorithm creates. Avoid things such as
declaring one output and then using the destination filename set for that
output to create a collection of them. That will break the correct semantics
of the algorithm and make it impossible to use it safely in the modeler. If
you have to write an algorithm like that, make sure you add the <tt class="docutils literal"><span class="pre">##nomodeler</span></tt> tag.</li>
<li>Do not show message boxes or use any GUI element from the script. If you want
to communicate with the user, use the <tt class="docutils literal"><span class="pre">setInfo()</span></tt> method or throw an
<tt class="docutils literal"><span class="pre">GeoAlgorithmExecutionException</span></tt></li>
<li>As a rule of thumb, do not forget that your algorithm might be executed in a
context other than the Processing toolbox.</li>
</ul>
</div>
<div class="section" id="pre-and-post-execution-script-hooks">
<h1><a class="toc-backref" href="#id7">Pre- and post-execution script hooks</a><a class="headerlink" href="#pre-and-post-execution-script-hooks" title="Permalink to this headline">¶</a></h1>
<p>Scripts can also be used to set pre- and post-execution hooks that are run before
and after an algorithm is run. This can be used to automate tasks that should be
performed whenever an algorithm is executed.</p>
<p>The syntax is identical to the syntax explained above, but an additional global
variable named <tt class="docutils literal"><span class="pre">alg</span></tt> is available, representing the algorithm that has just
been (or is about to be) executed.</p>
<p>In the <em class="guilabel">General</em> group of the processing config dialog you will find two
entries named <em class="guilabel">Pre-execution script file</em> and <em class="guilabel">Post-execution
script file</em> where the filename of the scripts to be run in each case can be
entered.</p>
</div>

                        
                    
                </div>
                  
            </div>
        </div>
    

    <!--<a href="https://github.com/qgis/"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a>-->
    <div class="related">
       
      
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="3rdParty.html" title="Configuring external applications"
             >next</a></li>
        <li class="right" >
          <a href="history.html" title="The history manager"
             >previous</a> |</li>
        <li><a href="../../index.html"></a> &raquo;</li>
          <li><a href="../index.html" >QGIS User Guide</a> &raquo;</li>
          <li><a href="index.html" >QGIS processing framework</a> &raquo;</li> 
      </ul>
    </div>
  <footer class="footer">

    <div class="container">
        <div>
          <ul class="unstyled inline" id="social">
            <li id="twitter"><a href="http://twitter.com/qgis" class="external"><div></div></a></li>
            <li id="facebook"><a href="https://www.facebook.com/pages/QGIS-Quantum-GIS-/298112000235096" class="external"><div></div></a></li>
            <li id="gplus"><a href="http://plus.google.com/communities/114776597176808981624" class="external"><div></div></a></li>
            <li id="github"><a href="http://github.com/qgis/" class="external"><div></div></a></li>
            <!--<li id="aboutcontact"><a href="../../../site/getinvolved/about.html"><div></div></a></li>-->
            <li id="aboutcontact"><a href="http://www.qgis.org/en/site/getinvolved/about.html"><div></div></a></li>
          </ul>
        </div>

        <p class="credit">If not stated otherwise, all content is licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 licence (CC BY-SA)</a></p>
    </div>
    <div class="container">
      <p class="credit">
        Select graphics from <a href="http://thenounproject.com" target="_blank">The Noun Project collection</a>
        
        
      </p>
      <p class="credit">
        <!--
        Untranslated page? Or you spot a translation error:
        <a id="fix_translation_link" target="_blank" href="https://www.transifex.com/projects/p/qgis-documentation/">fix me</a>
        <br/>
        -->
        Textual error, missing text or you know better:
        <a id="fix_text_link" target="_blank" href="https://github.com/qgis/QGIS-Documentation">fix me</a>
      </p>
    </div>
  </footer>

  </body>
</html>